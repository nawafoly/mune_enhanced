<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ุชุฌุฑุจุฉ ุงูุฎุท ูุงููุชุบููุฑุงุช</title>

    <!-- ุชุญุณูู ุงูุงุชุตุงู ูุจู ุชุญููู ุงูุฎุท -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- ุฎุท Tajawal ุจุงูุฃูุฒุงู ุงููุทููุจุฉ -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap"
        rel="style.css">

    <link rel="stylesheet" href="style.css">
    <script src="main.js" defer></script>



    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDJtbThBhZr4bmIoxTr55seoU3VoSC4ZuU",
            authDomain: "index-599e8.firebaseapp.com",
            projectId: "index-599e8",
            storageBucket: "index-599e8.firebasestorage.app",
            messagingSenderId: "57008792504",
            appId: "1:57008792504:web:16c083ad855e787143254d",
            measurementId: "G-CQNV5H3RKG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ูุญูุธ ุจูุงูุงุช
        async function saveData() {
            try {
                await addDoc(collection(db, "users"), {
                    name: "ููุงู",
                    message: "ูุฑุญุจูุง ูู Firebase!"
                });
                alert("โ ุชู ุงูุญูุธ ุจูุฌุงุญ");
            } catch (e) {
                console.error("โ ุฎุทุฃ ูู ุงูุญูุธ:", e);
            }
        }

        // ูุนุฑุถ ุงูุจูุงูุงุช
        async function getData() {
            const querySnapshot = await getDocs(collection(db, "users"));
            querySnapshot.forEach((doc) => {
                console.log(`${doc.id} =>`, doc.data());
            });
        }

        window.saveData = saveData;
        window.getData = getData;
    </script>
</head>

<body>
    <div class="topbar">
        <div class="title">
            <div>
                <span class="badge">v3.0</span>
                <h1>๐ฐ ุฅุฏุงุฑุฉ ูุงูู ุงูุดุฎุตูุฉ</h1>
            </div>
            <div class="topbar-actions">
                <div class="notification-badge" id="alertsCount" style="display: none;">
                    <span id="alertsText">0 ุชูุจูู</span>
                </div>
            </div>
        </div>
    </div>

    <main class="container grid cols-2">
        <!-- โ ุงูุฅุนุฏุงุฏุงุช ุงููุญุณูุฉ -->
        <section id="settings" class="card">
            <h2><span class="card-icon">โ๏ธ</span>ุงูุฅุนุฏุงุฏุงุช ูุงูุชุญูู</h2>
            <div class="toolbar">
                <div class="grow">
                    <label class="muted">ุฑุงุชุจ ุงูุดูุฑ (ุฑ.ุณ)</label>
                    <input id="salaryInput" type="number" placeholder="ูุซุงู: 7400" />
                </div>
                <div class="grow">
                    <label class="muted">ุงูุงุฏุฎุงุฑ ุงููุณุชูุฏู (ุฑ.ุณ)</label>
                    <input id="savingTargetInput" type="number" placeholder="ูุซุงู: 1200" />
                </div>
                <div>
                    <label class="muted">ุงูุดูุฑ ุงููุนุฑูุถ</label>
                    <input id="monthPicker" type="month" />
                </div>
                <div>
                    <button id="saveSettingsBtn" class="btn primary">๐พ ุญูุธ</button>
                </div>
            </div>

            <div class="sep"></div>

            <div class="setting">
                <label class="switch">
                    <input id="cashMode" type="checkbox" />
                    <span class="slider"></span>
                </label>
                <div class="info">
                    <div class="title">๐ต ูุถุน ููุฏู</div>
                    <div class="desc">ูุญุณุจ ุงูุฃูุณุงุท/ุงูููุงุชูุฑ ุงููุนูููุฉ ยซูุฏููุนยป ููุท</div>
                </div>
            </div>

            <div class="setting">
                <label class="switch">
                    <input id="autoDeduct" type="checkbox" />
                    <span class="slider"></span>
                </label>
                <div class="info">
                    <div class="title">โก ุฎุตู ุชููุงุฆู</div>
                    <div class="desc">ูุนูู ยซูุฏููุนยป ุชููุงุฆููุง ููู ุงูุงุณุชุญูุงู ุนูุฏ ูุชุญ ุงูุตูุญุฉ</div>
                </div>
            </div>

            <div class="setting">
                <label class="switch">
                    <input id="rollover" type="checkbox" />
                    <span class="slider"></span>
                </label>
                <div class="info">
                    <div class="title">๐ ุชุฑุญูู ุงููุชุฃุฎุฑ</div>
                    <div class="desc">ุฅูุดุงุก ุจูุฏ ุฎุงุฑุฌู ููุดูุฑ ุงูุชุงูู ูุฃู ูุณุท/ูุงุชูุฑุฉ ุบูุฑ ูุฏููุนุฉ</div>
                </div>
            </div>

            <div class="setting">
                <label class="switch">
                    <input id="themeToggle" type="checkbox" />
                    <span class="slider"></span>
                </label>
                <div class="info">
                    <div class="title">๐ ุงููุถุน ุงููุงุชุญ</div>
                    <div class="desc">ุชุจุฏูู ุจูู ุงููุถุน ุงููุงุชุญ ูุงูุฏุงูู</div>
                </div>
            </div>

            <div class="sep"></div>

            <div class="toolbar">
                <button id="applySuggestedBtn" class="btn secondary">๐ ุงุนุชูุงุฏ ุงูุงุฏุฎุงุฑ ุงูููุชุฑุญ (15%)</button>
                <span id="savingSuggestion" class="muted"></span>
            </div>

            <div class="kpis">
                <div class="kpi">
                    <div class="lbl">๐ฐ ุงูุฏุฎู ุงูุดูุฑู</div>
                    <div class="val" id="kpiIncome">0</div>
                    <div class="trend up" id="incomeTrend" style="display: none;">
                        <span>โ๏ธ</span> +5.2%
                    </div>
                </div>
                <div class="kpi">
                    <div class="lbl">๐ธ ุฅุฌูุงูู ุงููุตุฑูู</div>
                    <div class="val" id="kpiOut">0</div>
                    <div class="trend down" id="expenseTrend" style="display: none;">
                        <span>โ๏ธ</span> -2.1%
                    </div>
                </div>
                <div class="kpi">
                    <div class="lbl">๐ฆ ุงูุงุฏุฎุงุฑ ุงููุญูู</div>
                    <div class="val" id="kpiSave">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="savingProgress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="kpi">
                    <div class="lbl">๐ต ุงูุตุงูู ุงููุชุจูู</div>
                    <div class="val" id="kpiNet">0</div>
                    <div class="trend" id="netTrend" style="display: none;">
                        <span>๐</span> ูุชูุงุฒู
                    </div>
                </div>
            </div>
        </section>

        <!-- โ ุงูุฑุณูู ุงูุจูุงููุฉ ุงููุญุณูุฉ -->
        <section id="chartsSec" class="card">
            <h2><span class="card-icon">๐</span>ุงูุชุญูููุงุช ูุงูุฑุณูู ุงูุจูุงููุฉ</h2>
            <div class="charts">
                <div class="chart-container">
                    <canvas id="chartMonthly"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="chartBreakdown"></canvas>
                </div>
            </div>
            <div class="muted text-center mt-4">
                ๐ ุชุญููู ูุงูู ุชูุงุนูู ูุน ุฑุณูู ุจูุงููุฉ ูุชูุฏูุฉ
            </div>
        </section>

        <!-- โ ุงูุฃูุณุงุท ุงููุญุณูุฉ -->
        <section id="instSec" class="card">
            <h2><span class="card-icon">๐ฆ</span>ุงูุฃูุณุงุท ุงูุซุงุจุชุฉ</h2>
            <form id="instForm" class="toolbar">
                <input id="instName" class="grow" placeholder="ุงุณู ุงููุณุท (ูุณุท ุณูุงุฑุฉ)" required />
                <input id="instAmount" type="number" placeholder="ูุจูุบ ุดูุฑู" required />
                <input id="instStart" type="date" required />
                <input id="instEnd" type="date" placeholder="(ุงุฎุชูุงุฑู) ุชุงุฑูุฎ ุงูุชูุงุก" />
                <input id="instDueDay" type="number" min="1" max="31" placeholder="ููู ุงูุงุณุชุญูุงู" />
                <button class="btn success">โ ุฅุถุงูุฉ</button>
            </form>
            <div class="table-container">
                <table class="table" id="instTable">
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงููุฏู</th>
                            <th class="fit">ููู ุงูุงุณุชุญูุงู</th>
                            <th class="fit">ุงุณุชุญูุงู ูุฐุง ุงูุดูุฑ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- โ ุงูููุงุชูุฑ ุงููุญุณูุฉ -->
        <section id="billsSec" class="card">
            <h2><span class="card-icon">๐งพ</span>ุงูููุงุชูุฑ ุงูุดูุฑูุฉ</h2>
            <form id="billForm" class="toolbar">
                <input id="billName" class="grow" placeholder="ุงุณู (ุฅูุชุฑูุช/ููุฑุจุงุก/ุฌูุงู)" required />
                <input id="billAmount" type="number" placeholder="ูุจูุบ ุดูุฑู" required />
                <input id="billStart" type="date" required />
                <input id="billEnd" type="date" placeholder="(ุงุฎุชูุงุฑู) ุชุงุฑูุฎ ุงูุชูุงุก" />
                <input id="billDueDay" type="number" min="1" max="31" placeholder="ููู ุงูุงุณุชุญูุงู" />
                <button class="btn success">โ ุฅุถุงูุฉ</button>
            </form>
            <div class="table-container">
                <table class="table" id="billTable">
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงููุฏู</th>
                            <th class="fit">ููู ุงูุงุณุชุญูุงู</th>
                            <th class="fit">ุงุณุชุญูุงู ูุฐุง ุงูุดูุฑ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- โ ุงููุตุงุฑูู ุงููุญุณูุฉ -->
        <section id="expSec" class="card">
            <h2><span class="card-icon">๐ณ</span>ุงููุตุงุฑูู ุงูููููุฉ</h2>
            <form id="expForm" class="toolbar">
                <input id="expDate" type="date" required />
                <input id="expCat" class="grow" placeholder="ุชุตููู (ุฃูู/ููุงุตูุงุช)" required />
                <input id="expNote" class="grow" placeholder="ููุงุญุธุฉ" />
                <input id="expAmount" type="number" placeholder="ุงููุจูุบ" required />
                <select id="expPay" title="ุทุฑููุฉ ุงูุฏูุน">
                    <option value="cash">๐ต ููุฏูุง</option>
                    <option value="card">๐ณ ุจุทุงูุฉ</option>
                    <option value="transfer">๐ฆ ุชุญููู</option>
                    <option value="wallet">๐ฑ ูุญูุธุฉ ุฑูููุฉ</option>
                </select>
                <button class="btn success">โ ุฅุถุงูุฉ</button>
            </form>
            <div class="toolbar mt-4">
                <input id="searchInput" class="grow" placeholder="๐ ุจุญุซ ูู ุงููุตุงุฑูู ุงูููููุฉ..." />
                <button id="exportCSV" type="button" class="btn ghost">๐ ุชุตุฏูุฑ CSV</button>
                <button id="exportJSON" type="button" class="btn ghost">๐ ุชุตุฏูุฑ JSON</button>
                <button id="importData" type="button" class="btn secondary">๐ฅ ุงุณุชูุฑุงุฏ ุจูุงูุงุช</button>
            </div>
            <div class="table-container">
                <table class="table" id="expTable">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูุชุตููู</th>
                            <th>ุงููุตู</th>
                            <th class="fit">ุทุฑููุฉ ุงูุฏูุน</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4"><strong>ุฅุฌูุงูู ุงููุนุฑูุถ</strong></td>
                            <td id="expShownTotal"><strong>0</strong></td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </section>

        <!-- โ ุงููุตุงุฑูู ุงูุฎุงุฑุฌูุฉ ุงููุญุณูุฉ -->
        <section id="oneSec" class="card">
            <h2><span class="card-icon">โ๏ธ</span>ูุตุงุฑูู ุฎุงุฑุฌูุฉ</h2>
            <form id="oneForm" class="toolbar">
                <input id="oneDate" type="date" required />
                <input id="oneCat" class="grow" placeholder="ุงูููุน (ูุฎุงููุฉ/ุฑุณูู ุญููููุฉ...)" required />
                <input id="oneNote" class="grow" placeholder="ููุงุญุธุฉ" />
                <input id="oneAmount" type="number" placeholder="ุงููุจูุบ" required />
                <label class="muted flex items-center gap-2">
                    <input id="onePaid" type="checkbox" />
                    โ ูุฏููุนุฉ ุงูุขู
                </label>
                <button class="btn warning">โ ุฅุถุงูุฉ</button>
            </form>
            <div class="table-container">
                <table class="table" id="oneTable">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุน</th>
                            <th>ููุงุญุธุฉ</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- โ ุงูููุฒุงููุงุช ุงููุญุณูุฉ -->
        <section id="budgetsSec" class="card">
            <h2><span class="card-icon">๐ฏ</span>ููุฒุงููุงุช ุงูุชุตูููุงุช</h2>
            <form id="budForm" class="toolbar">
                <input id="budCat" class="grow" placeholder="ุชุตููู (ุฃูู/ููุงุตูุงุช/โฆ)" required>
                <input id="budLimit" type="number" placeholder="ุงูุญุฏ ุงูุดูุฑู (ุฑ.ุณ)" required>
                <button class="btn primary">๐พ ุญูุธ ุงูููุฒุงููุฉ</button>
            </form>
            <div class="table-container">
                <table class="table" id="budTable">
                    <thead>
                        <tr>
                            <th>ุงูุชุตููู</th>
                            <th class="fit">ุงูุญุฏ ุงููุญุฏุฏ</th>
                            <th class="fit">ุงููุตุฑูู ุงูุญุงูู</th>
                            <th class="fit">ุงููุณุจุฉ ุงููุณุชุฎุฏูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- โ ุงูููุฎุต ุงูุดูุฑู ุงููุญุณู -->
        <section id="summarySec" class="card">
            <h2><span class="card-icon">๐</span>ุงูููุฎุต ุงูุดูุฑู ุงูุชูุตููู</h2>
            <div class="table-container">
                <table class="table" id="monthSummary"></table>
            </div>
            <div class="toolbar mt-4">
                <button id="generateReport" class="btn primary">๐ ุชูุฑูุฑ ููุตู</button>
                <button id="compareMonths" class="btn secondary">๐ ููุงุฑูุฉ ุงูุฃุดูุฑ</button>
                <button id="exportSummary" class="btn ghost">๐ ุชุตุฏูุฑ ุงูููุฎุต</button>
            </div>
        </section>

        <button onclick="saveData()">๐พ ุญูุธ ุชุฌุฑุจุฉ</button>
        <button onclick="getData()">๐ ุนุฑุถ ุงูุจูุงูุงุช</button>

    </main>

    <!-- โ ุฒุฑ ุงูุฅุถุงูุฉ ุงูุณุฑูุนุฉ ุงููุญุณู -->
    <div class="fab-wrap">
        <button class="fab" id="fabAdd" aria-label="ุฅุถุงูุฉ ูุตุฑูู ุณุฑูุน">
            โ
        </button>
    </div>

    <!-- โ ุดุฑูุท ุงูุชููู ุงูุณููู ุงููุญุณู -->
    <nav class="bottom-nav">
        <a href="#summarySec" data-section="summary">
            ๐<br>ููุฎุต
        </a>
        <a href="#expSec" data-section="expenses">
            ๐ณ<br>ูุตุงุฑูู
        </a>
        <a href="#budgetsSec" data-section="budgets">
            ๐ฏ<br>ููุฒุงููุงุช
        </a>
        <a href="#instSec" data-section="installments">
            ๐ฆ<br>ุฃูุณุงุท
        </a>
        <a href="#billsSec" data-section="bills">
            ๐งพ<br>ููุงุชูุฑ
        </a>
        <a href="#chartsSec" data-section="charts">
            ๐<br>ุฑุณูู
        </a>
    </nav>

    <!-- โ ูุธุงู ุงูุชูุจููุงุช -->
    <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true" style="display:none"></div>

    <!-- โ ูุงูุฐุฉ ุงูุฅุถุงูุฉ ุงูุณุฑูุนุฉ ุงููุญุณูุฉ -->
    <div class="modal" id="quickModal">
        <div class="sheet">
            <div class="handle"></div>
            <h3>๐ฐ ุฅุถุงูุฉ ูุตุฑูู ุณุฑูุน</h3>
            <form id="quickForm">
                <input id="qDate" type="date" required>
                <select id="qPay">
                    <option value="cash">๐ต ููุฏูุง</option>
                    <option value="card">๐ณ ุจุทุงูุฉ</option>
                    <option value="transfer">๐ฆ ุชุญููู</option>
                    <option value="wallet">๐ฑ ูุญูุธุฉ ุฑูููุฉ</option>
                </select>
                <input id="qCat" placeholder="ุชุตููู" required>
                <input id="qAmount" type="number" placeholder="ุงููุจูุบ (ุฑ.ุณ)" required>
                <input id="qNote" class="full" placeholder="ููุงุญุธุฉ (ุงุฎุชูุงุฑู)">
                <div class="full flex gap-4 mt-4">
                    <button class="btn ghost" id="qCancel" type="button">โ ุฅูุบุงุก</button>
                    <button class="btn primary" type="submit">๐พ ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- โ ูุงูุฐุฉ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช -->
    <div class="modal" id="importModal">
        <div class="sheet">
            <div class="handle"></div>
            <h3>๐ฅ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</h3>
            <div class="mb-4">
                <label class="muted">ุงุฎุชุฑ ููู JSON ุฃู CSV:</label>
                <input type="file" id="importFile" accept=".json,.csv" class="mt-2">
            </div>
            <div class="flex gap-4">
                <button class="btn ghost" id="importCancel">โ ุฅูุบุงุก</button>
                <button class="btn primary" id="importConfirm">๐ฅ ุงุณุชูุฑุงุฏ</button>
            </div>
        </div>
    </div>

</body>

</html>
